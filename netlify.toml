# ───────────────────────────────────────────────────────────
# 1) Static-asset pass-through under /posts/:slug
[[redirects]]
  from   = "/posts/:slug/:file.:ext"
  to     = "/posts/:slug/:file.:ext"
  status = 200
  force  = true

# ───────────────────────────────────────────────────────────
# 2) FORCE a 301 from /post?postId=XYZ → /posts/XYZ/
[[redirects]]
  from       = "/post"
  to         = "/posts/:slug/"
  status     = 301
  force      = true
  conditions = { query = { postId = ":slug" } }

# ───────────────────────────────────────────────────────────
# 3) SPA loader: rewrite /posts/XYZ/* → post.html?postId=XYZ
[[redirects]]
  from   = "/posts/:slug"
  to     = "/post.html?postId=:slug"
  status = 200
  force  = true

[[redirects]]
  from   = "/posts/:slug/*"
  to     = "/post.html?postId=:slug"
  status = 200
  force  = true
